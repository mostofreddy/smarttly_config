<!DOCTYPE html>
<html lang="en">

<head>

    <base href="">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Config | Smarttly component</title>

    <!-- MAIN APP CSS FILES-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
        crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/main.css" />
</head>

<body>
    <nav class="navbar navbar-expand-sm navbar-light bg-white docs-navbar">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">
            <img src="assets/images/smarttly_config_logo.png" alt="Config" style="height:50px" />
        </a>

        <ul class="navbar-nav ml-auto ">
            <li class="nav-item">
                <a class="nav-link" href="https://github.com/mostofreddy/smarttly_config" title="View on Github"><i class="fab fa-github fa-2x"></i></a>
            </li>
        </ul>
    </div>
</nav>


    <div class="container-fluid">
        <div class="row">
            <div class="col container-sidebar">
                <ul class="sidebar list-unstyled">
    <li><a href="#introduccion" title="Introduccion">Introduccion</a></li>
    <li><a href="#funcionalidades" title="Introduccion">Funcionalidades</a></li>
    <li><a href="#requerimientos" title="Requerimientos">Requerimientos</a></li>
    <li><a href="#instalacion" title="Instalacion">Instalacion</a></li>
    <li><a href="#uso" title="Uso">Uso</a></li>
    <li><a href="#roadmap" title="Roadmap">Roadmap</a></li>
</ul>

            </div>
            <div class="col container-body">
                <h1 id="-introduccion"><a name="introduccion"></a> Introduccion</h1>

<p>Config es un componente que permite cargar, combinar y acceder de forma sencilla a los datos de configuracion de una aplicacion.</p>

<p>Los archivos de configuracion pueden estar en distintos formatos, actualmente se proporciona adaptadores para archivo JSON, PHP y arrays de PHP.</p>

<p><a href="https://travis-ci.org/mostofreddy/smarttly_config"><img src="https://travis-ci.org/mostofreddy/smarttly_config.svg?branch=master" alt="Build Status" /></a>
<a href="https://coveralls.io/github/mostofreddy/smarttly_config?branch=master"><img src="https://coveralls.io/repos/github/mostofreddy/smarttly_config/badge.svg?branch=master" alt="Coverage Status" /></a>
<a href="https://packagist.org/packages/smarttly/config"><img src="https://poser.pugx.org/smarttly/config/v/stable" alt="Latest Stable Version" /></a>
<a href="https://packagist.org/packages/smarttly/config"><img src="https://poser.pugx.org/smarttly/config/downloads" alt="Total Downloads" /></a>
<a href="https://packagist.org/packages/smarttly/config"><img src="https://poser.pugx.org/smarttly/config/license" alt="License" /></a>
<a href="https://packagist.org/packages/smarttly/config"><img src="https://poser.pugx.org/smarttly/config/composerlock" alt="composer.lock" /></a></p>

<hr />

<h1 id="-funcionalidades"><a name="funcionalidades"></a> Funcionalidades</h1>

<ul>
  <li>Interfaz sencilla para acceder a los valores de configuracion</li>
  <li>Adaptadores para cargar archivos JSON y PHP</li>
  <li>Merge anidados de configuraciones</li>
</ul>

<hr />

<h1 id="-requerimientos"><a name="requerimientos"></a> Requerimientos</h1>

<ul>
  <li>PHP 7.0+.</li>
</ul>

<hr />

<h1 id="-instalacion"><a name="instalacion"></a> Instalacion</h1>

<p>Via Composer, agregando en la secci√≥n <code class="highlighter-rouge">require</code> del archivo <code class="highlighter-rouge">composer.json</code></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"require"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"smarttly/config"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Luego correr el comando <code class="highlighter-rouge">composer update</code> para instalar el componente</p>

<hr />

<h1 id="-uso"><a name="uso"></a> Uso</h1>

<p>El uso mas sencillo del componente es instanciando la clase <code class="highlighter-rouge">Config</code> pasandole un array de configuracion</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nx">Smarttly\Config\Config</span><span class="p">;</span>

<span class="nv">$defaultConfiguration</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'John'</span><span class="p">,</span>
    <span class="s1">'lastname'</span> <span class="o">=&gt;</span> <span class="s1">'Doe'</span><span class="p">,</span>
    <span class="s1">'database'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'driver'</span> <span class="o">=&gt;</span> <span class="s1">'mongodb'</span>
    <span class="p">]</span>
<span class="p">];</span>

<span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Config</span><span class="p">(</span><span class="nv">$defaultConfiguration</span><span class="p">);</span>

<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'name'</span><span class="p">);</span>
<span class="c1">// print: John</span>
</code></pre></div></div>

<h2 id="-como-acceder-a-los-valores-de-configuracion"><span class="numeral">#</span> Como acceder a los valores de configuracion</h2>

<p>Para acceder a los valores de configuracion se puede realizar mediante el metodo <code class="highlighter-rouge">get</code> o a travez del nombre de la variable.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$config</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'name'</span><span class="p">);</span>
<span class="c1">// print: John</span>

<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
<span class="c1">// print: John</span>
</code></pre></div></div>

<h3 id="--acceder-a-valores-aniddados">- Acceder a valores aniddados</h3>

<p>Cuando un valor de configuracion es del tipo <code class="highlighter-rouge">array</code> automaticamente es transformado a una instancia de <code class="highlighter-rouge">Config</code> para facilitar el acceso y el merge de configuraciones</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">echo</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'database'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'driver'</span><span class="p">);</span>
<span class="c1">// print: mongodb</span>

<span class="k">echo</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">database</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'driver'</span><span class="p">);</span>
<span class="c1">// print: mongodb</span>

<span class="k">echo</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">database</span><span class="o">-&gt;</span><span class="na">driver</span><span class="p">;</span>
<span class="c1">// print: mongodb</span>
</code></pre></div></div>

<h2 id="--cargar-configuracion-desde-archivo"><span class="numeral">#</span>  Cargar configuracion desde archivo</h2>

<p>Los archivos externos pueden ser JSON o PHP</p>

<h3 id="--leer-archivos-json">- Leer archivos JSON</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">//</span><span class="w"> </span><span class="err">config.json</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"say"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nx">Smarttly\Config\Reader\Json</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Smarttly\Config\Config</span><span class="p">;</span>

<span class="nv">$reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Json</span><span class="p">();</span>
<span class="nv">$defaultConfiguration</span> <span class="o">=</span> <span class="nv">$reader</span><span class="o">-&gt;</span><span class="na">fromFile</span><span class="p">(</span><span class="s1">'config.json);

$config = new Config($defaultConfiguration);

$config-&gt;get('</span><span class="nx">say</span><span class="err">'</span><span class="p">);</span>
<span class="c1">// print: hello</span>
</code></pre></div></div>

<h3 id="--leer-archivos-php">- Leer archivos PHP</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// config.php</span>
<span class="nv">$config</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'say'</span> <span class="o">=&gt;</span> <span class="s1">'hello'</span>
<span class="p">];</span>
<span class="k">return</span> <span class="nv">$config</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nx">Smarttly\Config\Reader\Php</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Smarttly\Config\Config</span><span class="p">;</span>

<span class="nv">$reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Php</span><span class="p">();</span>
<span class="nv">$defaultConfiguration</span> <span class="o">=</span> <span class="nv">$reader</span><span class="o">-&gt;</span><span class="na">fromFile</span><span class="p">(</span><span class="s1">'config.php);

$config = new Config($defaultConfiguration);

$config-&gt;get('</span><span class="nx">say</span><span class="err">'</span><span class="p">);</span>
<span class="c1">// print: hello</span>
</code></pre></div></div>

<h2 id="-combinar-archivos-de-configuracion"><span class="numeral">#</span> Combinar archivos de configuracion</h2>

<p>Config permite combinar distintas configuraciones en una sola. Esto es muy util para dividir la configuracion en distintos archivos (uno para los logs, otro para la base de datos, etc) y tambien cuando contamos con configuraciones por defecto y particulares de un ambiente (produccion, test, development, etc)</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$data1</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'John'</span><span class="p">,</span>
    <span class="s1">'lastname'</span> <span class="o">=&gt;</span> <span class="s1">'Doe'</span>
<span class="p">];</span>
<span class="nv">$config1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Config</span><span class="p">(</span><span class="nv">$data1</span><span class="p">);</span>

<span class="nv">$data2</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'lastname'</span> <span class="o">=&gt;</span> <span class="s1">'Smith'</span><span class="p">,</span>
    <span class="s1">'database'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'driver'</span> <span class="o">=&gt;</span> <span class="s1">'mongodb'</span>
    <span class="p">]</span>
<span class="p">];</span>
<span class="nv">$config2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Config</span><span class="p">(</span><span class="nv">$data2</span><span class="p">);</span>

<span class="nv">$config1</span><span class="o">-&gt;</span><span class="na">merge</span><span class="p">(</span><span class="nv">$config2</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$config1</span><span class="o">-&gt;</span><span class="na">lastname</span><span class="p">;</span>
<span class="c1">// print: Smith</span>

<span class="k">echo</span> <span class="nv">$config1</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
<span class="c1">// print: John</span>

<span class="k">echo</span> <span class="nv">$config1</span><span class="o">-&gt;</span><span class="na">database</span><span class="o">-&gt;</span><span class="na">driver</span><span class="p">;</span>
<span class="c1">// print: mongodb</span>
</code></pre></div></div>

<h2 id="-cargar-cambiar-valores-de-configuracion"><span class="numeral">#</span> Cargar/ cambiar valores de configuracion</h2>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nx">Smarttly\Config\Config</span><span class="p">;</span>

<span class="nv">$defaultConfiguration</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'John'</span><span class="p">,</span>
    <span class="s1">'lastname'</span> <span class="o">=&gt;</span> <span class="s1">'Doe'</span><span class="p">,</span>
    <span class="s1">'database'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'driver'</span> <span class="o">=&gt;</span> <span class="s1">'mongodb'</span>
    <span class="p">]</span>
<span class="p">];</span>

<span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Config</span><span class="p">(</span><span class="nv">$defaultConfiguration</span><span class="p">);</span>

<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'lastname'</span><span class="p">,</span> <span class="err">'</span><span class="nx">Smith</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">lastname</span><span class="p">;</span>
<span class="c1">// print: Smith</span>
</code></pre></div></div>

<hr />

<h1 id="-roadmap"><a name="roadmap"></a> Roadmap</h1>

<p>Pendientes a desarrollar</p>

<ul>
  <li>Leer configuracion desde archivios INI</li>
  <li>Leer configuracion desde archivios YAML</li>
  <li>Leer configuracion desde archivo .env</li>
  <li>Posibilidad de cargar un directorio de configuraciones automaticamente</li>
  <li>Notacion por puntos para acceder a configuraciones</li>
  <li>Cache</li>
</ul>

<p><br /></p>

            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
</body>

</html>
